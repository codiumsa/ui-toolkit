<div>
  <div ng-if="!options.imageOnly">
    <div flow-init="options" flow-files-submitted="$flow.upload()" flow-file-added="fileAdded($file, $event, $flow)"
      flow-files-added="filesAdded($files, $event, $flow)" flow-file-success="uploadCompleted($flow.files)"
      flow-name="uploader.flow" class="ng-scope">
      <h4>{{title}}</h4>

      <div class="drop" flow-drop ng-class="dropClass" flow-drop-enabled="!disabled">
        <span class="btn btn-default btn-sm" ng-disabled="disabled" flow-btn>Cargar archivo
        <input type="file" ng-model="fileModel" sf-changed="form" style="visibility: hidden; position: absolute;"/>
      </span>
        <br/>
        <span><small>&nbsp; o arrastre el archivo aqu&iacute;</small></span>
      </div>
      <br/>

      <div>
        <div ng-repeat="file in $flow.files" class="transfer-box">
          <span style="display:block; margin-top: 10px"><small>{{file.relativePath}} ({{ (file.size / 1024) | filesize: 2 }} KB)</small></span>
          <div class="progress progress-striped" ng-class="{active: file.isUploading()}">
            <uib-progressbar class="progress progressbar-xs" value="file.progress() * 100" type="{{file.error ? 'danger': (file.isUploading() ? 'info' : 'success')}}"
              style="width: 80%; display: inline-block;"></uib-progressbar>
          </div>
          <div class="btn-group upload-buttons">
            <button title="Pausar subida de archivo" ng-click="file.pause()" ng-show="!file.paused && file.isUploading()"
              class="waves-effect waves-button waves-sm waves-float waves-default"><i class="fa fa-pause"></i></button>

            <button title="Continuar subida de archivo" ng-click="file.resume()" ng-show="file.paused" class="waves-effect waves-button waves-sm waves-float waves-default"><i class="fa fa-play"></i></button>

            <button title="Borrar archivo" ng-click="file.cancel()" class="waves-effect waves-button waves-sm waves-float waves-default"><i class="fa fa-times"></i></button>

            <button title="Reintentar subida" ng-click="file.retry()" ng-show="file.error" class="waves-effect waves-button waves-sm waves-float waves-default"><i class="fa fa-repeat"></i></button>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div ng-if="options.imageOnly" class="clearfix">
    <div flow-init="options" flow-files-submitted="$flow.upload()" flow-file-added="fileAdded($file, $event, $flow)"
      flow-files-added="filesAdded($files, $event, $flow)" flow-file-success="uploadCompleted($flow.files)"
      flow-name="uploader.flow" class="ng-scope">
      <h4>{{title}}</h4>
      <div class="drop" flow-drop ng-class="dropClass" flow-drop-enabled="!disabled">
        <span class="btn btn-default" ng-disabled="disabled" flow-btn>Subir imagen</span>
        <span class="btn btn-default" ng-disabled="disabled" flow-btn flow-directory ng-show="$flow.supportDirectory">Subir directorio con im&aacute;genes</span>
        <b>O</b> Arrastrar las im&aacute;genes aqu&iacute;.
      </div>
      <br/>
      <div>
        <div ng-repeat="file in $flow.files" class="gallery-box">
          <span class="title">{{file.name}}</span>
          <div class="thumbnail" ng-show="$flow.files.length">
            <img ng-if="!file.file.image_url" flow-img="file" />
            <img ng-if="file.file.image_url" ng-src="{{file.file.image_url}}" />
          </div>
          <div class="progress progress-striped" ng-class="{active: file.isUploading()}">
            <div class="progress-bar" role="progressbar" aria-valuenow="{{file.progress() * 100}}" aria-valuemin="0"
              aria-valuemax="100" ng-style="{width: (file.progress() * 100) + '%'}">
              <span class="sr-only">{{file.progress()}}% Completo</span>
            </div>
          </div>
          <div class="btn-group">
            <a class="btn btn-xs btn-danger" ng-disabled="disabled" ng-click="remove(file)">
          Remover
        </a>
          </div>
        </div>
        <div ng-if="options.showFilesSummary" class="row" ng-show="files.length > 0">
          <div class="col-lg-12" style="margin-left: 10px; margin-top: 15px;">
            <h4> Archivos subidos </h4>
            <div ng-repeat="file in files">
              [{{$index + 1}}] <strong>URL:</strong> <span style="font-size: 13px;">{{adjuntosBaseURL}}/{{file.path}}</span>
            </div>
          </div>
        </div>
        <div class="clear"></div>
      </div>
    </div>
  </div>
</div>